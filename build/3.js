webpackJsonp([3],{465:function(n,a,t){"use strict";function l(n){return i._23(0,[(n()(),i._0(0,0,null,null,8,"ion-header",[["class","transaction-wizard-header"]],null,null,null,null,null)),i.Z(1,16384,null,0,v.a,[P.a,i.j,i.z,[2,z.a]],null,null),(n()(),i._21(-1,null,["\n    "])),(n()(),i._0(3,0,null,null,1,"ion-toolbar",[["class","custom-header-spacer toolbar"]],[[2,"statusbar-padding",null]],null,null,I.b,I.a)),i.Z(4,49152,null,0,T.a,[P.a,i.j,i.z],null,null),(n()(),i._21(-1,null,["\n    "])),(n()(),i._0(6,0,null,null,1,"transaction-wizard-step-header",[],null,null,null,Z.b,Z.a)),i.Z(7,49152,null,0,w.a,[e.a,k.a],{form:[0,"form"]},null),(n()(),i._21(-1,null,["\n"])),(n()(),i._21(-1,null,["\n\n"])),(n()(),i._0(10,0,null,null,43,"ion-content",[["class","transaction-wizard-description-step"]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,j.b,j.a)),i.Z(11,4374528,null,0,C.a,[P.a,k.a,D.a,i.j,i.z,Y.a,E.a,i.u,[2,z.a],[2,x.a]],null,null),(n()(),i._21(-1,1,["\n    "])),(n()(),i._0(13,0,null,1,39,"div",[["responsive-padding",""]],null,null,null,null,null)),(n()(),i._21(-1,null,["\n        "])),(n()(),i._0(15,0,null,null,28,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(n,a,t){var l=!0,u=n.component;if("submit"===a){l=!1!==i._14(n,17).onSubmit(t)&&l}if("reset"===a){l=!1!==i._14(n,17).onReset()&&l}if("submit"===a){t.preventDefault();l=!1!==u.wizard.next()&&l}return l},null,null)),i.Z(16,16384,null,0,M.r,[],null,null),i.Z(17,4210688,[["form",4]],0,M.k,[[8,null],[8,null]],null,null),i._18(2048,null,M.b,null,[M.k]),i.Z(19,16384,null,0,M.j,[M.b],null,null),(n()(),i._21(-1,null,["\n            "])),(n()(),i._0(21,0,null,null,21,"ion-list",[["inset",""]],null,null,null,null,null)),i.Z(22,16384,null,0,S.a,[P.a,i.j,i.z,k.a,W.l,D.a],null,null),(n()(),i._21(-1,null,["\n                "])),(n()(),i._0(24,0,null,null,17,"ion-item",[["class","item item-block"]],null,null,null,F.b,F.a)),i.Z(25,1097728,null,3,R.a,[q.a,P.a,i.j,i.z,[2,B.a]],null,null),i._19(335544320,1,{contentLabel:0}),i._19(603979776,2,{_buttons:1}),i._19(603979776,3,{_icons:1}),i.Z(29,16384,null,0,A.a,[],null,null),(n()(),i._21(-1,2,["\n                    "])),(n()(),i._0(31,0,null,0,1,"ion-icon",[["item-start",""],["name","pricetag"],["role","img"]],[[2,"hide",null]],null,null,null,null)),i.Z(32,147456,[[3,4]],0,L.a,[P.a,i.j,i.z],{name:[0,"name"]},null),(n()(),i._21(-1,2,["\n                    "])),(n()(),i._0(34,0,null,3,6,"ion-input",[["name","description"],["placeholder","Enter a description. eg. Food Shopping."],["required",""],["type","text"]],[[1,"autofocus",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,a,t){var l=!0;if("ngModelChange"===a){l=!1!==(n.component.data.description=t)&&l}return l},O.b,O.a)),i.Z(35,16384,null,0,M.o,[],{required:[0,"required"]},null),i._18(1024,null,M.f,function(n){return[n]},[M.o]),i.Z(37,671744,null,0,M.l,[[2,M.b],[2,M.f],[8,null],[8,null]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),i._18(2048,null,M.h,null,[M.l]),i.Z(39,16384,null,0,M.i,[M.h],null,null),i.Z(40,5423104,null,0,V.a,[P.a,k.a,q.a,Y.a,i.j,i.z,[2,C.a],[2,R.a],[2,M.h],D.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null),(n()(),i._21(-1,2,["\n                "])),(n()(),i._21(-1,null,["\n            "])),(n()(),i._21(-1,null,["\n        "])),(n()(),i._21(-1,null,["\n        "])),(n()(),i._0(45,0,null,null,6,"ion-list-header",[["class","item"],["no-lines",""]],null,null,null,F.b,F.a)),i.Z(46,1097728,null,3,R.a,[q.a,P.a,i.j,i.z,[2,B.a]],null,null),i._19(335544320,4,{contentLabel:0}),i._19(603979776,5,{_buttons:1}),i._19(603979776,6,{_icons:1}),i.Z(50,16384,null,0,G.a,[P.a,i.z,i.j,[8,null]],null,null),(n()(),i._21(-1,2,["\n            Or are you adding any of these?\n        "])),(n()(),i._21(-1,null,["\n    "])),(n()(),i._21(-1,1,["\n"]))],function(n,a){var t=a.component;n(a,7,0,i._14(a,17));n(a,32,0,"pricetag");n(a,35,0,"");n(a,37,0,"description",t.data.description);n(a,40,0,"text","Enter a description. eg. Food Shopping.")},function(n,a){n(a,3,0,i._14(a,4)._sbPadding);n(a,10,0,i._14(a,11).statusbarPadding,i._14(a,11)._hasRefresher);n(a,15,0,i._14(a,19).ngClassUntouched,i._14(a,19).ngClassTouched,i._14(a,19).ngClassPristine,i._14(a,19).ngClassDirty,i._14(a,19).ngClassValid,i._14(a,19).ngClassInvalid,i._14(a,19).ngClassPending);n(a,31,0,i._14(a,32)._hidden);n(a,34,0,!0,i._14(a,35).required?"":null,i._14(a,39).ngClassUntouched,i._14(a,39).ngClassTouched,i._14(a,39).ngClassPristine,i._14(a,39).ngClassDirty,i._14(a,39).ngClassValid,i._14(a,39).ngClassInvalid,i._14(a,39).ngClassPending)})}Object.defineProperty(a,"__esModule",{value:!0});var i=t(0),u=(t(1),t(17),t(203)),o=t(473),e=t(470),s=function(){function n(n,a){this.wizard=n,this.elementRef=a,this.static_name="TransactionWizardDescriptionQuickStep",this.wizard&&(this.data=this.wizard.data)}return n.prototype.ionViewDidEnter=function(){this.wizard.currentPage=this},n}(),r=function(){return function(){}}(),c=t(390),d=t(391),h=t(392),g=t(393),p=t(394),_=t(395),f=t(396),m=t(397),b=t(398),y=t(475),v=t(31),P=t(2),z=t(5),I=t(52),T=t(27),Z=t(476),w=t(471),k=t(4),j=t(33),C=t(21),D=t(8),Y=t(7),E=t(23),x=t(18),M=t(19),S=t(44),W=t(11),F=t(34),R=t(15),q=t(13),B=t(29),A=t(30),L=t(51),O=t(53),V=t(45),G=t(75),N=i.Y({encapsulation:2,styles:[],data:{}}),Q=i.W("ng-component",s,function(n){return i._23(0,[(n()(),i._0(0,0,null,null,1,"ng-component",[],null,null,null,l,N)),i.Z(1,49152,null,0,s,[e.a,i.j],null,null)],null,null)},{},{},[]),U=t(12),J=t(206),X=t(93);t.d(a,"TransactionWizardDescriptionQuickStepModuleNgFactory",function(){return H});var H=i.X(r,[],function(n){return i._11([i._12(512,i.i,i.S,[[8,[c.a,d.a,h.a,g.a,p.a,_.a,f.a,m.a,b.a,y.a,Q]],[3,i.i],i.s]),i._12(4608,U.l,U.k,[i.r,[2,U.u]]),i._12(4608,M.s,M.s,[]),i._12(4608,M.d,M.d,[]),i._12(512,U.b,U.b,[]),i._12(512,M.q,M.q,[]),i._12(512,M.e,M.e,[]),i._12(512,M.n,M.n,[]),i._12(512,J.a,J.a,[]),i._12(512,J.b,J.b,[]),i._12(512,u.a,u.a,[]),i._12(512,o.a,o.a,[]),i._12(512,r,r,[]),i._12(256,X.a,s,[])])})},470:function(n,a,t){"use strict";t.d(a,"a",function(){return h});t(1),t(17);var l=t(165),i=t(59),u=t(43),o=t(48),e=(t(22),t(472)),s=t(40),r=(t.n(s),t(389)),c=t(127),d=t(60),h=function(){function n(n,a,t){var s=this;if(this.navParams=n,this.viewCtrl=a,this.engineFactory=t,this.modalPageParams=this.navParams.data,this.modalPage=this.navParams.data.transactionId?"TransactionWizardViewPage":"TransactionWizardAccountStep",this.data=new e.a,this.data.transactionType="Expense",this.data.lines=[],this.data.accountLines=[],this.data.reconciliation=[],this.data.engine=t.getEngineById(n.data.budgetId),null!=n.data.categoryId&&(this.data.engine.getCategory(n.data.categoryId),this.data.category=this.data.engine.db.transactionProcessor.table(i.a).by("id",n.data.categoryId)),n.data.transactionId){this.data.editing=!0;var h=this.data.engine.db.transactionProcessor.table(o.a).by("id",n.data.transactionId);this.data.transaction=this.data.engine.db.transactionProcessor.findTransactionsForRecord(h,l.a)[0],null==this.data.category&&(this.data.category=this.data.engine.db.transactionProcessor.table(i.a).by("id",this.data.transaction.amounts[0].categoryId)),this.data.date=u.a.toIonicFromYYYYMMDD(this.data.transaction.date),this.data.description=this.data.transaction.description,this.data.transaction.amounts.forEach(function(n){s.data.lines.push({categoryId:n.categoryId,amount:n.amount.abs().toString(),negative:n.amount.gt(0)})}),this.data.transaction.accountAmounts&&this.data.transaction.accountAmounts.forEach(function(n){s.data.accountLines.push({accountId:n.accountId,amount:n.amount.abs().toString(),negative:n.amount.gt(0)})}),this.data.engine.db.transactionProcessor.findRecordsForTransaction(this.data.transaction,c.a).forEach(function(n){n.x.reconciliationRecords&&n.x.reconciliationRecords.forEach(function(a){var t=s.data.engine.db.transactionProcessor.table(d.a).by("id",a.bankTransactionId);s.data.reconciliation.push({bankTransaction:t,accountId:n.accountId,amount:a.amount,transaction:s.data.engine.db.transactionProcessor.findTransactionsForRecord(a,r.a)[0]})})}),this.data.transactionType=this.data.total.eq(0)?"Transfer":this.data.total.gt(0)?"Expense":"Money In",this.data.negative="Expense"===this.data.transactionType,this.data.snapshotOriginal()}else this.data.editing=!1,this.data.transactionType=this.navParams.data.transactionType||"Expense",this.data.negative="Expense"===this.data.transactionType,this.data.date=u.a.toIonicFromYYYYMMDD(this.navParams.data.date||u.a.nowYYYYMMDD()),this.data.description=this.navParams.data.description,this.data.lines.push({categoryId:this.data.category?this.data.category.id:void 0,amount:this.navParams.data.amount?this.navParams.data.amount+"":"",negative:this.data.negative})}return n.prototype.done=function(){var n,a=this;(n=this.data.editing?this.data.transaction:new l.a).date=u.a.toYYYYMMDDFromIonic(this.data.date),n.description=this.data.description,n.amounts=[],this.data.lines.forEach(function(a){n.amounts.push({categoryId:a.categoryId,amount:new s.Big((a.amount||"0").replace(",","")).times(a.negative?1:-1)})}),n.accountAmounts=[],this.data.accountLines.forEach(function(a){null!=a.accountId&&null!=a.amount&&"0"!==a.amount.trim()&&a.amount.length>0&&n.accountAmounts.push({accountId:a.accountId,amount:new s.Big((a.amount||"0").replace(",","")).times(a.negative?1:-1)})}),this.data.engine.db.applyTransaction(n),this.data.editing||this.data.reconciliation.forEach(function(t){var l=new r.a,i=a.data.engine.db.transactionProcessor.findRecordsForTransaction(n,c.a);l.accountTransactionId=i.find(function(n){return n.accountId===t.accountId}).id,l.bankTransactionId=t.bankTransaction.id,l.amount=t.amount,a.data.engine.db.applyTransaction(l)}),this.dismiss()},n.prototype.delete=function(){var n=this;this.data.engine.db.deleteTransaction(this.data.transaction),this.data.reconciliation.forEach(function(a){a.transaction&&n.data.engine.db.deleteTransaction(a.transaction)}),this.dismiss()},n.prototype.ngOnInit=function(){},n.prototype.dismiss=function(){this.viewCtrl.dismiss()},n.prototype.next=function(){"TransactionWizardAccountStep"!==this.currentPage.static_name||null!=this.data.description&&0!==this.data.description.trim().length?("TransactionWizardDescriptionStep"===this.currentPage.static_name||"TransactionWizardAccountStep"===this.currentPage.static_name)&&this.data.total.eq(0)&&this.data.lines.length<2?this.navPush("TransactionWizardAmountStep"):this.navPush("TransactionWizardViewPage"):this.navPush("TransactionWizardDescriptionQuickStep")},n.prototype.navPush=function(n){return this.nav.push(n,this.modalPageParams,{animate:!1,keyboardClose:!1})},n.prototype.navRoot=function(n){return this.nav.setRoot(n,this.modalPageParams)},n.prototype.back=function(){this.nav.pop()},n.prototype.canGoBack=function(){return this.nav.canGoBack()},n}()},471:function(n,a,t){"use strict";t.d(a,"a",function(){return l});t(1),t(17);var l=function(){function n(n,a){this.wizard=n,this.platform=a,this.data=n.data}return n.prototype.cancel=function(){this.wizard.dismiss()},n}()},472:function(n,a,t){"use strict";t.d(a,"a",function(){return o});var l=t(40),i=(t.n(l),t(388)),u=t.n(i),o=function(){function n(){}return Object.defineProperty(n.prototype,"total",{get:function(){return this.lines?this.lines.reduce(function(n,a){return n.plus(a.amount?a.amount:0)},new l.Big(0)):new l.Big(0)},enumerable:!0,configurable:!0}),n.prototype.snapshotOriginal=function(){this.originalData=this.stringifyData()},n.prototype.stringifyData=function(){var n={};return n.date=this.date,n.description=this.description,n.lines=this.lines,n.accountLines=this.accountLines,u()(n)},n.prototype.isLocked=function(){return this.editing&&this.reconciliation.length>0},n.prototype.isDirty=function(){return!this.editing||this.originalData!==this.stringifyData()},n}()},473:function(n,a,t){"use strict";t(1),t(0),t(17),t(203),t(470),t(471),t(474),t(472),t(40),t(56),t(204),t(25),t(94),t(3);t.d(a,"a",function(){return l});var l=function(){return function(){}}()},474:function(n,a,t){"use strict";t.d(a,"a",function(){return l});t(1);var l=function(){return function(n){this.wizard=n,this.data=n.data}}()},475:function(n,a,t){"use strict";function l(n){return i._23(0,[i._19(402653184,1,{nav:0}),(n()(),i._0(1,0,null,null,2,"ion-nav",[["id","transactionWizardNav"]],null,null,null,u.b,u.a)),i._18(6144,null,o.a,null,[e.a]),i.Z(3,4374528,[[1,4],["nav",4]],0,e.a,[[2,s.a],[2,r.a],c.a,d.a,h.a,i.j,i.u,i.z,i.i,g.l,p.a,[2,_.a],f.a,i.k],{root:[0,"root"],rootParams:[1,"rootParams"]},null),(n()(),i._21(-1,null,["\n"]))],function(n,a){var t=a.component;n(a,3,0,t.modalPage,t.modalPageParams)},null)}t.d(a,"a",function(){return P});var i=t(0),u=t(205),o=t(67),e=t(92),s=t(5),r=t(18),c=t(7),d=t(2),h=t(4),g=t(11),p=t(66),_=t(36),f=t(8),m=t(470),b=t(16),y=t(22),v=i.Y({encapsulation:2,styles:[],data:{}}),P=i.W("ng-component",m.a,function(n){return i._23(0,[(n()(),i._0(0,0,null,null,1,"ng-component",[],null,null,null,l,v)),i.Z(1,114688,null,0,m.a,[b.a,s.a,y.a],null,null)],function(n,a){n(a,1,0)},null)},{},{},[])},476:function(n,a,t){"use strict";function l(n){return u._23(0,[(n()(),u._0(0,0,null,null,2,"button",[["ion-button",""]],null,[[null,"click"]],function(n,a,t){var l=!0;if("click"===a){l=!1!==n.component.wizard.back()&&l}return l},o.b,o.a)),u.Z(1,1097728,[[2,4]],0,e.a,[[8,""],s.a,u.j,u.z],null,null),(n()(),u._21(-1,0,["Back"]))],null,null)}function i(n){return u._23(0,[(n()(),u._0(0,0,null,null,32,"ion-toolbar",[["class","toolbar"]],[[2,"statusbar-padding",null]],null,null,r.b,r.a)),u.Z(1,49152,null,0,c.a,[s.a,u.j,u.z],null,null),(n()(),u._21(-1,3,["\n    "])),(n()(),u._0(3,0,null,0,12,"ion-buttons",[["left",""]],null,null,null,null,null)),u.Z(4,16384,null,1,d.a,[s.a,u.j,u.z,[2,c.a],[2,h.a]],null,null),u._19(603979776,1,{_buttons:1}),(n()(),u._21(-1,null,["        \n        "])),(n()(),u._0(7,0,null,null,3,"button",[["class","md-only"],["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(n,a,t){var l=!0;if("click"===a){l=!1!==n.component.wizard.dismiss()&&l}return l},o.b,o.a)),u.Z(8,1097728,[[1,4]],0,e.a,[[8,""],s.a,u.j,u.z],null,null),(n()(),u._0(9,0,null,0,1,"ion-icon",[["name","close"],["role","img"]],[[2,"hide",null]],null,null,null,null)),u.Z(10,147456,null,0,g.a,[s.a,u.j,u.z],{name:[0,"name"]},null),(n()(),u._21(-1,null,["\n        "])),(n()(),u._0(12,0,null,null,2,"button",[["class","ios-only"],["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(n,a,t){var l=!0;if("click"===a){l=!1!==n.component.wizard.dismiss()&&l}return l},o.b,o.a)),u.Z(13,1097728,[[1,4]],0,e.a,[[8,""],s.a,u.j,u.z],null,null),(n()(),u._21(-1,0,["Cancel"])),(n()(),u._21(-1,null,["\n    "])),(n()(),u._21(-1,3,["\n\n    "])),(n()(),u._0(17,0,null,3,2,"ion-title",[],null,null,null,p.b,p.a)),u.Z(18,49152,null,0,_.a,[s.a,u.j,u.z,[2,c.a],[2,h.a]],null,null),(n()(),u._21(19,0,["\n        ","     \n    "])),(n()(),u._21(-1,3,["\n\n    "])),(n()(),u._0(21,0,null,2,10,"ion-buttons",[["end",""]],null,null,null,null,null)),u.Z(22,16384,null,1,d.a,[s.a,u.j,u.z,[2,c.a],[2,h.a]],null,null),u._19(603979776,2,{_buttons:1}),(n()(),u._21(-1,null,["\n        "])),(n()(),u.V(16777216,null,null,1,null,l)),u.Z(26,16384,null,0,f.j,[u.I,u.F],{ngIf:[0,"ngIf"]},null),(n()(),u._21(-1,null,["\n        "])),(n()(),u._0(28,0,null,null,2,"button",[["ion-button",""]],[[8,"disabled",0]],[[null,"click"]],function(n,a,t){var l=!0;if("click"===a){l=!1!==n.component.wizard.next()&&l}return l},o.b,o.a)),u.Z(29,1097728,[[2,4]],0,e.a,[[8,""],s.a,u.j,u.z],null,null),(n()(),u._21(-1,0,["Next"])),(n()(),u._21(-1,null,["\n    "])),(n()(),u._21(-1,3,["\n\n"])),(n()(),u._21(-1,null,["\n\n"])),(n()(),u._0(34,0,null,null,5,"ion-toolbar",[["class","extended-toolbar toolbar"]],[[2,"statusbar-padding",null]],null,null,r.b,r.a)),u.Z(35,49152,null,0,c.a,[s.a,u.j,u.z],null,null),(n()(),u._21(-1,3,["\n    "])),(n()(),u._0(37,0,null,3,1,"div",[["class","toolbar-category-label"]],null,null,null,null,null)),(n()(),u._21(38,null,["\n        in ","\n    "])),(n()(),u._21(-1,3,["\n"])),(n()(),u._21(-1,null,["\n"]))],function(n,a){var t=a.component;n(a,10,0,"close");n(a,26,0,t.wizard.canGoBack())},function(n,a){var t=a.component;n(a,0,0,u._14(a,1)._sbPadding);n(a,9,0,u._14(a,10)._hidden);n(a,19,0,t.data.transactionType);n(a,28,0,t.form&&!t.form.valid);n(a,34,0,u._14(a,35)._sbPadding);n(a,38,0,null==t.data.category?null:t.data.category.name)})}t.d(a,"a",function(){return m}),a.b=i;var u=t(0),o=t(20),e=t(14),s=t(2),r=t(52),c=t(27),d=t(35),h=t(28),g=t(51),p=t(37),_=t(32),f=t(12),m=u.Y({encapsulation:2,styles:[],data:{}})}});